<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
        <link rel="stylesheet" href="resources/css/estil.css"></link>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
              rel="stylesheet"></link>
    </h:head>
    <h:body style=" background-color: #F7F7F7;">
        <div class="nav_header" >
            <div class="nav_header_logo">
                <div>
                    <span class="material-icons icon_logo" >shopping_cart</span>
                </div>
                <div>
                    <t3 style="font-weight: 600; color: #707070">LOGO</t3>
                </div>

            </div>
            <div class="nav_header_busqueda_princ">
                <div class="nav_header_busqueda">
                    <input class="nav_header_busq_text" type="text" placeholder="Buscar.."/>
                    <span class="material-icons nav_header_busq_icon">search</span>
                </div>
                <div class="nav_header_busq_cart_cont">
                    <p class="item_num_cart" style="padding-left: 8px;"> 0</p>
                    <a href="#" id="Add2cart"><i class="material-icons nav_header_busq_cart_cont_icon" style="font-size: 25px;">shopping_cart</i>
                    </a>

                    <a href="CarritoCompras.xhtml"> <label for="Add2cart" class="nav_header_busq_cart_cont_lbl">Mi carrito</label></a>
                </div>

            </div>

            <div class="nav_header_submenu">
                <div class="nav_header_busq_cart_cont_item">
                    <a href="#" id="nav_head_prim_itm_home"><i class="material-icons nav_header_busq_cart_cont_icon selected_item" style="font-size: 25px;">home</i>
                    </a>
                    <label for="nav_head_prim_itm_home" class="nav_header_busq_cart_cont_lbl selected_item">Inicio</label>
                </div>
                <div class="nav_header_busq_cart_cont_item">
                    <a href="#" id="nav_head_prim_itm_star"><i class="material-icons nav_header_busq_cart_cont_icon" style="font-size: 25px;">favorite</i>
                    </a>
                    <label for="nav_head_prim_itm_star" class="nav_header_busq_cart_cont_lbl">Favoritos</label>
                </div>
                <div class="nav_header_busq_cart_cont_item">
                    <a href="#" id="nav_head_prim_itm_star"><i class="material-icons nav_header_busq_cart_cont_icon" style="font-size: 25px;">style</i>
                    </a>
                    <label for="nav_head_prim_itm_star" class="nav_header_busq_cart_cont_lbl">Mis compras</label>
                </div>
                <div class="nav_header_busq_cart_cont_item">
                    <a href="#" id="nav_head_prim_itm_star"><i class="material-icons nav_header_busq_cart_cont_icon" style="font-size: 25px;">perm_identity</i>
                    </a>
                    <label for="nav_head_prim_itm_star" class="nav_header_busq_cart_cont_lbl">Usuario</label>
                </div>
            </div>

        </div>
        <div class="prinplbRes" >   
            <h:form>
                

                    <div class="card_prod_dest" style="vertical-align: central;">
                        <h:graphicImage value="#{beanEstablecimientoFinal.foto}" styleClass="card_prod_dest_img" style="  width: 750px;height: 200px;border-radius: 50px; margin-right: 40px;" ></h:graphicImage>

                        <div style="width: 100%; margin-top: 20px;">
                            <h:outputLabel class="card_prod_dest_titulo" value="#{beanEstablecimientoFinal.nombre}"></h:outputLabel>
                            <div class="card_prod_dest_sec">
                                <h:outputLabel class="card_prod_dest_tipo_item" value="#{beanEstablecimientoFinal.categoria}" style="text-transform: capitalize;"></h:outputLabel>

                                <div>
                                  <!--  <p:rating id="valorCalificacionReg" value="" readonly="true" /> -->

                                </div>
                            </div>

                            <hr style=" border-top: 2px  rgb(217, 174, 138);"/>

                            <p class="card_prod_dest_parrafo" style="width: 100%; min-height: 50px;">#{beanEstablecimientoFinal.descripcion}</p>
                            <div class="card_prod_dest_sec2_prin">
                                <div class="card_prod_dest_sec2">
                                    <i class="material-icons " style="font-size: 25px; color:#BF0A19;">location_on</i>

                                    <h:outputLabel class="card_prod_dest_texSec" value="#{beanEstablecimientoFinal.direccion}"></h:outputLabel>                                  
                                    <i class="material-icons " style="font-size: 25px; color:#BF0A19; margin-left: 10px;">access_time</i>
                                    <p class="card_prod_dest_texSec2">Abierto</p>
                                    <p class="card_prod_dest_texSec">Horario de cierre 23:00</p> 
                                </div>
                            </div>
                        </div>
                    </div>
             
            </h:form>
            <div class="tabs" style="top:110%; width: 80%; margin-bottom: 200px;">
                <div class="tab-header">
                    <div class="divtab-header headerActive" style="display: flex; align-items: center;">
                        <span class="material-icons" style=" margin-right: 5px; margin-left: 55px;">
                            pending_actions
                        </span> MENÃš
                    </div>
                    <div class="divtab-header" style="display: flex; align-items: center;">
                        <span class="material-icons" style=" margin-right: 5px; margin-left: 55px;">
                            library_add_check
                        </span>CALIFICACIONES
                    </div>

                </div>



                <div class="tab-indicator"></div>
                <div class="tab-body" >
                    <div class="divTab bodyActive">
                        <div class="contcardsPedits">
                            <h:form id="filtrofoto">
                                <div  class="cont_cards_min" style="display: flex; flex-wrap: wrap; width: 100%; margin-left: 0; min-width: 800px;" >
                                    <ui:repeat var="p" value="#{producto.productosEst}">  
                                        <div class="cards_min" style="margin-bottom: 20px;">                                        
                                            <h:graphicImage class="cards_min_img" value="#{p.foto}"> </h:graphicImage>                                        
                                            <p class="cards_min_nombre">#{p.descripcion}</p>
                                            <p class="cards_min_rest">#{p.nombre}</p>   
                                            
                                            <p:commandButton  class="cards_min_btn" value="Ver" action="#{producto.reidrigir()}">                                                       
                                                <f:setPropertyActionListener value="#{p}" target="#{producto.mostrarAux}" />
                                            </p:commandButton>                                               
                                        </div>
                                    </ui:repeat>
                                </div>
                            </h:form>
                        </div>
                    </div>

                    <div class="divTab">

                        <h:form id="frm" >
                            <div style="display: flex;">

                                <div>
                                    <div>
                                        <h4 style=" margin-top: 30px; margin-bottom: 20px; font-size: 22px; font-weight: 600; color: #707070">Calificaciones y opiniones</h4>
                                    </div>

                                    <div  style="display: flex;" >
                                        <h:form>
                                            <div style=" min-width: 100px;">

                                                <p style="text-align: center;margin: auto; font-size: 50px; font-weight: 600; color: #7F7F7F">#{beanCalificacionE.calificacionAnalisis.promedio}</p>
                                                <div style="display: flex; margin-top: 10px; margin-bottom: 10px;">            
                                                    <p:rating id="valorCalificacionReg" value="#{beanCalificacionE.calificacionAnalisis.promedioInt}" readonly="true" />
                                                </div>
                                                <p style="text-align: left;margin: auto; font-size: 16px; font-weight: 100; color: #7F7F7F">#{beanCalificacionE.calificacionAnalisis.numOpiniones}</p>
                                            </div>

                                        </h:form>
                                        <h:panelGroup id="panel" layout="blook">
                                            <p:chart type="bar" model="#{beanCalificacionE.barModel}" style="width: 300px;height:200px;" rendered="#{beanCalificacionE.barModel!=null}"/>
                                        </h:panelGroup>
                                    </div>
                                </div>

                                <div style="display: flex;">
                                    <div>
                                        <ui:repeat var="c" value="#{beanCalificacionE.listCal}">  
                                            <div style="margin-left: 30px; width: 300px;">
                                                <div style="margin-top: 20px; margin-left: 15px;">
                                                    <h:outputLabel id="nombreUsuarioReg" value="#{c.nombreUsuario}" />
                                                    <div style="display: flex;">
                                                        <div style="display: flex; margin-top: 5px; margin-bottom: 10px;">            
                                                            <p:rating id="valorCalificacionReg" value="#{c.calificacion}" readonly="true" />
                                                        </div>
                                                        <h:outputLabel id="fechaReg" style="margin-top: 5px; margin-left: 5px;" value="#{c.fecha}"/>
                                                    </div>
                                                    <h:outputLabel id="comentarioReg" style="max-width: 350px;font-size: 12px; color: #7F7F7F"
                                                                   value="#{c.opinion}"/>
                                                </div>
                                            </div>
                                        </ui:repeat>
                                    </div>

                                    <div style="margin-top: 60px;">
                                        <p:inputText id="UsuarioActual" class="txtComentarioUser" style=" width: 200px;" disabled="true" value="Ronald:" />
                                        <p:inputTextarea id="ComentarioActual" class="txtComentarioCom" style=" width: 200px;" value="#{beanCalificacionE.comentario}"  placeholder="Escriba un comentario.."/>
                                        <div style="display: flex; justify-content: space-around; max-width: 250px; margin-left: -40px;" >

                                            <p:growl id="messages" showDetail="true"/>
                                            <p:rating id="ratingActual" value="#{beanCalificacionE.ratingcalificacion}">  
                                            </p:rating>
                                            <p:commandButton class="card_prod_dest_btn" style="width: 90px;"   actionListener="#{beanCalificacionE.registrarCalificacion()}" update="frm" value="CALIFICAR">
                                            </p:commandButton>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </h:form>
                    </div>
                </div>

            </div>
        </div>
        <script type="text/javascript" src="resources/js/refe.js"></script>
    </h:body>
</html>


